# OAuth2 Resource Server (Keycloak)
spring.security.oauth2.resourceserver.jwt.issuer-uri=${OIDC_ISSUER_URI:http://localhost:8080/realms/knightmesh}

# Static fallback backend URIs (used when DB has no GatewayRoute rows)
gateway.mgm.uri=${GATEWAY_MGM_URI:http://mgm:8080}
gateway.irp.uri=${GATEWAY_IRP_URI:http://irp:8080}
gateway.spm.uri=${GATEWAY_SPM_URI:http://spm:8080}

# Actuator & observability
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.probes.enabled=true
management.tracing.enabled=true
management.tracing.sampling.probability=1.0
observability.module=gateway
observability.module_type=GATEWAY
observability.instance_id=${HOSTNAME:local}-gateway
otel.exporter.otlp.endpoint=${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:4317}

# Keep gateway lightweight for tests (disable JPA auto-config unless explicitly enabled)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration

# Logging
logging.level.org.springframework.cloud.gateway=INFO
